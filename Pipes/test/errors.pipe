define pipe Tim
input
output

define pipe Sverre
input
output

define pipe outputs_without_stream
output: $stream

define pipe applied_to_un_init_stream
	$stream becomes no_streams applied to $stream.
output

load utils

define native get_flickr
input
	arguments: 5 as count
output

define pipe duplicate_name

	feed, using "" as url , extracted.
	
	loop, using
	    //on is [item]
	    [item] as on_fail
	    "meh" as on_failing
	    [item] as assign 
	    pipe get_flickr, using 66 as count, as trans
	    "all" as emit
	    // TODO all
	, applied.

output


define pipe duplicate_name

	feed, using "example.com/feed" as url,  extracted.

	oops, using
		"Bar" as argument
	, applied.

output

define pipe shadow
	feed, using "url" as url, extracted.
output

define pipe duplicate_native
output

define pipe multi
	$feed1 becomes feed, using "example.com/feed1" as url, extracted.
	$feed2 becomes feed, using "example.com/feed2" as url, extracted.
	
	$union becomes wrong_input_count applied.
	$union becomes wrong_input_count applied to $feed1.
	$union becomes wrong_input_count applied to $feed1 and $feed2.
	$union becomes wrong_input_count applied to $feed1 and $feed2 and $feed3.

output: $union

define native loop
input
	arguments: on and assign and trans and emit
output

define native wrong_input_count
input: $one and $two
output

define native no_streams
output

define native shadow
input
output

define native duplicate_native
input
output

define native duplicate_native
input
output

define native feed
input
	arguments: url
output

define native flickr
input: $stream
	arguments: find and images
output: $stream
