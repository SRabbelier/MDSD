define pipe main
	
	load utils.
	
	feed, using
	 "http://www.xkcd.com/rss.xml" as url
	, extracted.
	
	filter, using
	    [title] as on
	    "the" as query
	, applied.
	
	loop, using
		[description] as on
		[image/url] as assign
		pipe search_pattern, using "src=\"([^\"]+)\"" as pattern
		, as trans 
	, applied.

output

define native feed
	arguments url
output

define native filter
input
	arguments on and query
output

define native loop
input
	arguments on and assign and trans
output

define native search_pattern
input
	arguments pattern
output
